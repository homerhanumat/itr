# Automated Class Functions

## Preliminary Notes

The stuff below works on my Debian system running Perl version 5.20, and on the College server running Ubuntu 14.04 and Perl 5.18.

In previous versions the user had to create a password file.  This is no longer the case:  now all you need is membership in the `sudo` and `instructor` groups.  The MAT 111 Czar will take care of this for you (though you may need to remind him/her to do this).

This version of the scripts is tailored to the current RStudio server, in which all regular users are in the `/home/FAST` directory.

## Installation and Setup

A convenient way to obtain the scripts is through git.

```{r eval = FALSE}
git clone https://github.com/homerhanumat/itr.git
```

### Install for the First Time

Save copies of `collecthomework.pl`, `createdirectories.pl`, `publish.pl` and `returnhomework.pl` into your Home directory on the Server.  (They are in the `perl` directory.)  Also save a copy of `class_functions.Rmd` to your Home.  **Never modify the contents of `itr`!**  (If you do, there will be problems updating later on.)

*Note:*  If you are using R Studio on the Digital Ocean server, then you will need to modify one line in each of the Perl scripts.  The line to modify is near the beginning and involves the expression `my($sourceRoot)`.  Directions for modification are in the comments underneath that line.

### Updates

To update the scripts, go to the Shell and run:

```{r eval = F}
cd itr
git pull origin master
```

Then repeat the saving process.

### Setup

Create a textfile of student usernames, one per line in the usual way, and save it to your Home directory.  In the examples that follow, this file will be called `students.txt`.

Create a directory in your Home directory called `homework`.

## Directory Creation

To create directories, use the script `creatdirectories.pl`.  Open the shell (**Tools --> Shell**) and run:

```{sh eval = FALSE}
sudo perl createdirectories.pl --studentfile=students.txt
```

## Homework Collection

To collect homework, open the shell (**Tools --> Shell** ) and run something like this:

```{sh eval = F}
sudo perl collecthomework.pl --inst=hwhite0 --assign=HW02 --file=students.txt
```

**Note:**  modify the `inst`, `assign` and `file` arguments as needed!

## Returning Homework

Open the shell (**Tools --> Shell** ) and run something like this:


```{sh eval = FALSE}
sudo perl returnhomework.pl --path=HW02 --inst=hwhite0 --file=students.txt --flag=_com
```

Again, modify arguments as needed.  In this script:

* `path` is the tag you used to identify an assignment to collect (it's the `assign` tag from `collecthomework.pl` script);
* `flag` is the tag you include in the filename of the "comments" version that you plan to return to students.

## Generating a Report

For this you will use still use classr as described in the package vignette, i.e., something like:

```{r eval = FALSE}
myReport <- SubmissionReport(studentfile="students.txt",
                             folder="homework",
                             assigntype="DA")
```