---
title: "Various WeBWorK Admin Commands"
author: "Homer White"
date: "August 19, 2016"
output: html_document
---

# Server Load

To set MaxRequestWorkers and MaxConnectionsPerChild, go to:

```
/etc/apache2/mods-enabled/mpm_prefork.conf
```

At 4G memory, I'm trying 5 and 10 for instructor-development periods, and 20 and 40 for regular semester use.

Then a graceful restart:

```
sudo apache2ctl graceful
```

# Monitoring Usage

To find users in a given hour:  In `/var/log/apache2`, run a perl one-liner like:

```
perl -nle 'print $1 if /03\/Sep\/2016:23:.*[?&]user=(.*?)["& ]/' access.log
```

Usage by hour in a given day:

```
grep "02/Sep" access.log.1 | cut -d[ -f2 | cut -d] -f1 | awk -F: '{print $2":00"}' | sort -n | uniq -c
```



